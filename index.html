<!doctype html>

<html>
  <head>
    <meta charset="UTF-8" />

    <!-- this is necessary for responsive @media queries to work properly -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- The Title to your website. Shows in the browser tab or window, as well as in search engine results. Not actually on the page anywhere -->
    <title>YOURNAME’s Portfolio provided from Behance</title>

  </head>

  <body>
    <header>
      <p>How should we assume the header area act for most people?</p>
    </header>

    <main>
      <h1>Work.</h1>
      <div id="behance-magix">
        <!-- insert some HTML via magic JS -->
        <!-- this shows something here even if JS doesn't load -->
        <img src="https://unsplash.it/400/300/?random" />
        <p>This will be erased when javascript draws our new content. But, you can also put other things here incase the behance API is down or for some other reason the javascript doesn't run/load.</p>

        <!-- this is the template that each behance thing with use to print to the browser -->
        <script id="project-cards" type="text/template">
          {{#projects}}
          <div class="project" id="b{{id}}">
            <a href="#{{id}}" data-project-id="{{id}}">
              <img src="{{covers.404}}" alt="{{name}}" />
              <div class="info">
                <h2 class="name">{{name}}</h2>
              </div>
            </a>
          </div>
          {{/projects}}
        </script>

      </div>
    </main>

    <footer>
      <p>copyright, or footer-y stuff, etc.</p>
    </footer>

    <div id="dynamic-pages">
      <!-- individual pages will appear to "print" here -->
    </div>

    <!-- All your javascript (other than typekit related stuff) -->
    <!-- Placed at the end of the document so the pages load faster -->
    <!-- ================================================== -->
    <!-- ================================================== -->
    <!-- ================================================== -->
    <!-- ================================================== -->

    <!-- this is jquery, needed for a bunch of stuff -->
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

    <!-- this is mustache, required for the templating to happen -->
    <script src="http://cdnjs.cloudflare.com/ajax/libs/mustache.js/2.1.2/mustache.min.js"></script>

    <script>
      // your behance user machine name. Take it from your profile url
      // www.behance.net/userName
      var userName = 'kristianbjornard'

      // this is your behance APIkey — figure out how to set this up at » URL TO COME
      var apiKey   = '5T8WWYiQqGy7sJV1sEQIdO2k8CDNDQS7'

      // this url will provide a feed of content for the site based on your userName and apiKey.
      var url = 'https://api.behance.net/v2/users/' + userName + '/projects/?api_key=' + apiKey +'&per_page=25&callback=?';
      /* some issue where no more than 25 can be returned at a time, there are ways to ask for more? https://help.behance.net/hc/communities/public/questions/202357274-Number-of-Behance-API-request-results-limited-to-25- */

      // log url in console to make sure that things are working so far.
      console.log('connected to ' + url + '.');

      // this is where the actual magic happens.
      $.getJSON(url, function(data) {

        //mustache for projects
        var template = $('#project-cards').html();
        var info = Mustache.to_html(template, data);
        $('#behance-magix').html(info);

        $('.project a').click(function() {
         var projectID  = $(this).attr('data-project-id');
         var projectUrl = 'https://api.behance.net/v2/projects/' + projectID + '/?api_key=' + apiKey +'&callback=?';
         console.log('trying to show ' + projectUrl + '.');

          $.getJSON(projectUrl, function(data) {
            //mustache for projects
            var template = $('#project-page').html();
            var info = Mustache.to_html(template, data);
            $('#dynamic-pages').html(info);

            $('.project-page button.close').click(function() {
              $(this).parent().hide();
            });
          });
        });
      });

    </script>

    <script id="project-page" type="text/template">
      <div class="project-page" id="project-{{project.id}}">
        <div class="container">
          <img src="{{project.covers.original}}" alt="{{project.name}}" />
          <h1>{{project.name}}</h1>
          <p>{{project.description}}</p>
        </div>
        <button class="close">X</button>
      </div>
    </script>

  </body>
</html>
